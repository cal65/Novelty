{% extends "goodreads/basefile.html" %}
{% block content %}

<script>
function upload(){
        $.post({  
          url: "upload-csv/",
          data: {file: file1}, 
          success: function(data) {
                console.log(data)
              },
          error: function(data ){
                console.log("Something went wrong");
              }
      })
    }
</script>
<div style="text-align: center;" class="font-bold pt-4 text-3xl">GOODREADS ANALYSIS</div>
    {% if messages %}
        {% for message in messages %}
            <div class="text-red-600 pb-2">
               <strong>*{{message|safe}}</strong>
            </div>
        {% endfor %}
    {% endif %}
<div class="pt-8" style="display: flex; justify-content: center;">
   <div class="border-2 border-black p-2 w-1/3">
      <form action="" method="POST" enctype="multipart/form-data">
         {% csrf_token %}
         <input type="file" id="file1" name="file">
         <div class="pt-4"><button type="button" class="bg-blue-800 hover:bg-blue-900 text-white font-bold py-2 px-4 rounded" onclick="upload()">
             Upload
         </button></div>
      </form>
   </div>
</div>
<div class="pt-2" style="display: flex; justify-content: center;">
   <form method="POST">
      {% csrf_token %}
      <button type="submit" name="runscript" class="bg-blue-800 hover:bg-blue-900 text-white font-bold py-2 px-4 rounded">
      Analyze
      </button>
   </form>
</div>
<br> <br>
<div class = "center">
   Click <span style="font-weight:bold"> Choose File</span>, select a file, then click  <span class="text-blue-800">Upload</span>. This may take some time for your browser to process, based on the amount of books in your upload. Then click <span class="text-blue-800">Analyze</span> when you can. Afterwards, navigate to your <a href="{% url 'plots' %}">Plots</a> page.
</div>
<br><br>

{% endblock content %}